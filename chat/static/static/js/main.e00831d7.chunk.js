(this["webpackJsonpmycollab-dev"]=this["webpackJsonpmycollab-dev"]||[]).push([[0],{170:function(e){e.exports=JSON.parse('[{"image_url":"https://whichnespresso.com/wp-content/uploads/home.png","img_alt":"lattisima","name":"Lattisima","price":100},{"image_url":"https://whichnespresso.com/wp-content/uploads/home.png","img_alt":"lattisima","name":"Lattisima","price":100}]')},216:function(e,t,a){e.exports=a(411)},221:function(e,t,a){},222:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),c=a.n(r),s=(a(221),a(49)),o=a(26),i=a(78),m=a(79),u=a(84);function d(e){return l.a.createElement("div",{className:"login-wrapper"},l.a.createElement("div",{className:"login-form"},l.a.createElement("div",{className:"login-logo"},l.a.createElement("h1",null,"Callaby")),l.a.createElement("div",null,l.a.createElement("h2",null,"USER LOGIN")),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"username",id:"username",placeholder:"Username"})),l.a.createElement("div",null,l.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"Password"})),l.a.createElement("div",null,l.a.createElement("button",{className:"login-submit",onClick:e.to}," Submit"))))}function p(e){return l.a.createElement("div",{className:"agent-area"},l.a.createElement("div",null,l.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ9MVF1euuahaAdL4r6Y4P4PaVdewuQlhn1MoPjL8bMEyJxI_Aq",className:"agent-avatar",alt:"agent-avatar"})),l.a.createElement("div",{className:"agent-details"},l.a.createElement("div",{className:"agent-name"},e.user?l.a.createElement(l.a.Fragment,null,e.user.results[0].first_name," ",e.user.results[0].last_name," "):null),l.a.createElement("div",null,l.a.createElement("div",{className:"status-bubble"}),"Available")))}function h(){return l.a.createElement("div",{className:"details"},l.a.createElement("div",{className:"details-item"}," ",l.a.createElement("div",{style:{fontWeight:"bold",width:"110px",paddingLeft:"5px"}},"Customer"),l.a.createElement("div",null," David ")),l.a.createElement("div",{className:"details-item"}," ",l.a.createElement("div",{style:{fontWeight:"bold",width:"110px",paddingLeft:"5px"}},"Skill")," ",l.a.createElement("div",null," Coffee machine")),l.a.createElement("div",{className:"details-item"}," ",l.a.createElement("div",{style:{fontWeight:"bold",width:"110px",paddingLeft:"5px"}},"call duration")," ",l.a.createElement("div",null," 01:24 ")))}var E=a(21);function g(e){return l.a.createElement("div",{className:"chat-bubble ".concat(e.author)},e.content)}var v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).scrollToBottom=function(){a.messageEnd.scrollIntoView({behavior:"smooth"})},a.sendMessage=function(){var e={message:a.state.chatInput,agent:"Omer Daniel",customer:"unknown_customer",chat_id:"{{ room_name|escapejs }}"};a.setState((function(t){return{chatMessages:[].concat(Object(E.a)(t.chatMessages),[e]),chatInput:""}}),(function(){return a.scrollToBottom()})),a.chatSocket.send(JSON.stringify(e))},a.handleKeyUp=function(e){"Enter"===e.key&&a.sendMessage()},a.handleChange=function(e){a.setState({chatInput:e.target.value})},a.props=e,a.state={chatMessages:[],roomName:"room1",chatInput:""},a.roomName="chat1",a.chatSocket=new WebSocket("".concat(a.props.ws_url).concat(a.state.roomName,"/")),a.mesRef=l.a.createRef(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/messages/").then((function(e){return e.json()})).then((function(e){return e.results})).then((function(t){return e.setState({chatMessages:t})})),this.scrollToBottom(),this.chatSocket.onopen=function(e){},this.chatSocket.onmessage=function(t){var a=JSON.parse(t.data);e.setState((function(e){return{chatMessages:[].concat(Object(E.a)(e.chatMessages),[a])}}))}}},{key:"componentWillUnmount",value:function(){this.chatSocket.close(),this.chatSocket=null,this.chatSocket.send(JSON.stringify({message:"close",agent:"Omer Daniel",customer:"unknown_customer",chat_id:"{{ room_name|escapejs }}"}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"chat-box"},this.state.chatMessages.map((function(e,t){return l.a.createElement(g,{key:t,content:e.message,author:"sender"})})),l.a.createElement("div",{className:"dummy",ref:function(t){e.messageEnd=t}})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",autoComplete:"off",className:"chat-input",value:this.state.chatInput,id:"chat-message-input",onChange:this.handleChange,onKeyUp:this.handleKeyUp})))}}]),t}(n.Component);function f(e){return l.a.createElement("div",{className:"products-list"},e.products.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"product",key:t},l.a.createElement("div",{className:"product-pic"},l.a.createElement("img",{src:e.image_url,alt:e.image_alt,className:"product-image"})),l.a.createElement("div",{className:"product-details"},l.a.createElement("div",null,e.name," "),l.a.createElement("div",null,e.price,"$"))))})))}function b(e){return l.a.createElement("div",{className:"carousel"},l.a.createElement("h2",null," ","<"," Products >"),l.a.createElement(f,{products:e.products}))}function w(e){return l.a.createElement("div",{className:"agent-home"},l.a.createElement("div",{className:"left"},l.a.createElement(p,{user:e.user}),l.a.createElement(h,null)),l.a.createElement("div",{className:"center"},l.a.createElement(v,{ws_url:e.ws_url})),l.a.createElement("div",{className:"right"},l.a.createElement("a",{href:"/accounts/logout/"},"logout"),l.a.createElement(b,{products:e.products})))}a(222);var N=a(170),y=a(18),k=a(16),S=a(452),O=a(451),j=a(447),x=a(455),_=a(456),L=a(454),M=a(113),P=a.n(M),C=a(448),A=a(457),B=a(449),I=a(450),U=a(114),W=a.n(U),D=a(182),J=a.n(D),K=a(453),R=a(86),T=a(181),F=a(19),G=a(171),V=a.n(G);function q(e){return l.a.createElement("div",{className:"admin-widget"},l.a.createElement("h2",null,e.label),l.a.createElement("h1",null," ",e.amount),l.a.createElement("div",null," ",l.a.createElement(V.a,{fontSize:"large"})," "))}var Q=a(43),$=[{name:"Page A",uv:200,pv:2400,amt:2400},{name:"Page B",uv:600,pv:2400,amt:2400},{name:"Page A",uv:1500,pv:2400,amt:2400},{name:"Page A",uv:400,pv:2400,amt:2400},{name:"Page A",uv:200,pv:2400,amt:2400}];function z(){return l.a.createElement("div",null,l.a.createElement(Q.c,{width:950,height:300,data:$},l.a.createElement(Q.d,{dataKey:"name"}),l.a.createElement(Q.e,null),l.a.createElement(Q.a,{stroke:"#eee",strokeDasharray:"5 5"}),l.a.createElement(Q.b,{type:"monotone",dataKey:"uv",stroke:"#8884d8"}),l.a.createElement(Q.b,{type:"monotone",dataKey:"pv",stroke:"#82ca9d"})))}function H(){return l.a.createElement("div",null,l.a.createElement("div",{className:"widgets-header"},[{label:"Logged in agents",amount:2},{label:"Logged in agents",amount:2},{label:"Logged in agents",amount:2},{label:"Logged in agents",amount:2},{label:"Logged in agents",amount:2}].map((function(e){return l.a.createElement(q,{label:e.label,amount:e.amount})}))),l.a.createElement("div",null,l.a.createElement(z,null)))}a(410);var Y=Object(T.a)((function(e){return{root:{display:"flex"},drawer:Object(k.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(k.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(k.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)}}}));var X=function(e){var t=e.container,a=Y(),n=Object(F.a)(),r=l.a.useState(!1),c=Object(y.a)(r,2),s=c[0],o=c[1],i=function(){o(!s)},m=l.a.createElement("div",null,l.a.createElement("div",{className:a.toolbar}),l.a.createElement(j.a,null),l.a.createElement(C.a,null,["Home","Enterprises","Agents","Reports"].map((function(e,t){return l.a.createElement(A.a,{button:!0,key:e},l.a.createElement(B.a,null,t%2===0?l.a.createElement(P.a,null):l.a.createElement(W.a,null)),l.a.createElement(I.a,{primary:e}))}))),l.a.createElement(j.a,null),l.a.createElement(C.a,null,["All mail","Trash","Spam"].map((function(e,t){return l.a.createElement(A.a,{button:!0,key:e},l.a.createElement(B.a,null,t%2===0?l.a.createElement(P.a,null):l.a.createElement(W.a,null)),l.a.createElement(I.a,{primary:e}))}))));return l.a.createElement("div",{className:a.root},l.a.createElement(O.a,null),l.a.createElement(S.a,{position:"fixed",className:a.appBar},l.a.createElement(K.a,null,l.a.createElement(L.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:i,className:a.menuButton},l.a.createElement(J.a,null)),l.a.createElement(R.a,{variant:"h6",noWrap:!0},"Nespresso Callaby admin"))),l.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},l.a.createElement(_.a,{smUp:!0,implementation:"css"},l.a.createElement(x.a,{container:t,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:s,onClose:i,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},m)),l.a.createElement(_.a,{xsDown:!0,implementation:"css"},l.a.createElement(x.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},m))),l.a.createElement("div",{className:"admin-content"},l.a.createElement(H,null)))},Z=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).state={role:1,user:null},e.wsUrl="ws://localhost:8000/ws/chat/",e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;fetch("/api/users/").then((function(e){return e.json()})).then((function(t){return e.setState({user:t})}))}},{key:"toggleLogin",value:function(){this.setState((function(e){return{loggedIn:!e.loggedIn}}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},1===this.state.role?l.a.createElement(w,{products:N,user:this.state.user,ws_url:this.wsUrl}):l.a.createElement(X,{role:this.state.role}),4===this.state.role?l.a.createElement(d,{toggleLogin:function(){return e.toggleLogin()}}):null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[216,1,2]]]);
//# sourceMappingURL=main.e00831d7.chunk.js.map